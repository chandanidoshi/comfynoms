<!doctype html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

	<link href="https://fonts.googleapis.com/css?family=Lobster|Pacifico|Cookie" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Philosopher|BenchNine|Lato|Josefin+Sans" rel="stylesheet" type="text/css">
    
    <style>
	
	div {
		font-size: 15pt;
		font-family: Josefin Sans, sans-serif;
	}
	
	</style>
    
    <title>Edit Dish</title>

    <!-- Bootstrap Core CSS -->
    <link href="../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="../bower_components/metisMenu/dist/metisMenu.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../dist/css/sb-admin-2.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="../bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <div id="wrapper">

       <div class="navbar-default sidebar" role="navigation" style="margin-top:0px">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">
                        <a class="navbar-brand" href="index.html" style="font-size:32pt;font-family:pacifico;margin-top:27px;margin-bottom:10px;">Comfy Noms</a>
                        <img src="logo.svg" style="width:100px;height:50px;">
                        
                        <li> <a href="index.html"><i class="fa fa-cutlery fa-fw"></i> Menu for Tomorrow</a> </li>
                        <li>
                            <a href="planner.html"><i class="fa fa-calendar fa-fw"></i> Planner</a>
                            
                            <!-- /.nav-second-level -->
                        </li>
                        <li>
                            <a href="my_dishes.html"><i class="fa fa-th-list fa-fw"></i> My Dishes</a>
                        </li>
                        <li>
                            <a href="orderhistory.html"><i class="fa fa-history fa-fw"></i> Order History</a>
                        </li>
                        <li>
                            <a href="profile.html"><i class="fa fa-user fa-fw"></i> Profile</a>
                        </li>
                        <li>
                            <a href="contact-us.html"><i class="fa fa-envelope-o fa-fw"></i> Contact Us</a>
                            <!-- /.nav-second-level -->
                        </li>
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->

        <div id="page-wrapper">
            <div class="row" style="min-height:800px;">
              <div class="col-lg-12" style="height:auto">
                    <h1 class="page-header" style="font-weight:bolder">Edit Dish</h1>
                    <form class="form-inline" role="form">
  						<table class="table" style="width:55%;height:auto" >
                                    <tbody>
                                        <tr>
                                            <td style="width:30%;"><label style="font-weight:bold"> Dish Name:</label></td>
                                            <td ><input class="form-control" id="dish_name" style="width:80%;" disabled>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><label style="font-weight:bold"> Price:</label></td>
                                            <td>
                                            	<label style="font-weight:bold">$</label>
                                            	<input class="form-control" style="width:15%;text-align:center;" id="price_1">
                                                <label style="font-weight:bold">.</label>
                                                <input class="form-control" style="width:15%;text-align:center;" id="price_2">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><label style="font-weight:bold"> Servings:</label></td>
                                            <td>
                                            <div class="_add-to-cart--buttongroup">
                                            <button class="btn btn-primary btn-xs">-</button>
 											 <input class="form-control" type="text" id="edit-quantity" name="quantity" size="5" maxlength="128" style="text-align:center">
											<button class="btn btn-primary btn-xs">+</button>
                                            </div>
                                            </td>
                                        </tr>
                                        
                                    </tbody>
                                </table>
                                <button type="button" class="btn btn-primary btn-lg" id = "submit" style="margin-left:12.5%;margin-right:30px;" onclick="window.location.href='index.html'" >Submit Button</button>
                                <button type="button" class="btn btn-primary btn-lg" style="margin:20px 20px 20px 20px" onclick="window.location.href='index.html'">Cancel</button>

					</form>
                </div>
                <!-- /.col-lg-12 -->
           	</div>
            <!-- /.row -->
        </div>
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- jQuery -->
    <script src="../bower_components/jquery/dist/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="../bower_components/metisMenu/dist/metisMenu.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="../dist/js/sb-admin-2.js"></script>
    <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>

	<script>
    var ref = new Firebase('https://comfy-noms.firebaseio.com/');

    $(function() {
        $('._add-to-cart--buttongroup button').click(function(e) {
          e.preventDefault();
          var $button = $(this);
          var oldValue = $("#edit-quantity").val();
          if ($button.text() == "+") {
            var newValue = parseFloat(oldValue) + 1;
          } else {
            if (oldValue > 1) {
              var newValue = parseFloat(oldValue) - 1;
            } else {
              newValue = 1;
            }
          }

          $('#edit-quantity').val(newValue);
        });
    });


	$(function() {
        var raw_data = window.location.href;
        var parts = raw_data.split('=');
        var raw_data = parts[1];
        var date;
        var dish_name;
        var servings;
        var price;
        var price_1;
        var price_2;
        if (raw_data != undefined){
            useful_data = raw_data.split('/');
            date = useful_data[0];
            dish_name = useful_data[1];
            dish_name = dish_name.replace("-", " ");
            servings = useful_data[2];
            price = useful_data[3];
            price_ls = price.split(".");
            price_1 = price_ls[0];
            price_2 = price_ls[1];

            var update = JSON.stringify([{"dish_name":$('#dish_name').val(), "servings":$('#edit-quantity').val(),"dollars":$('#price_1').val(),"cents":$('#price_2').val()}]);
            ref.update({})
			ref.once("value", function(snapshot)  {
	all_data = snapshot.val();
    var tomorrow_get = JSON.parse(all_data[day]);
    var dinner = tomorrow_get.dinner;
    var dinner_items = JSON.parse(all_data[dinner]);
	
	var index = dinner_items.indexOf("dish_name");
	dinner_items.splice(index,1);
	var a = {};
	a[dinner]= JSON.stringify(dinner_items);
	ref.update(a);
			});
        } else {
            dish_name = "Enter Name of Dish"
            servings = "1";
            price_1 = "";
            price_2 = "00";
        }

        $('#dish_name').val(dish_name);
        $('#edit-quantity').val(servings);
        $('#price_1').val(price_1);
        $('#price_2').val(price_2);

    });


  </script>
</body>

</html>
